<header class="admin-page-header">
  <div>
    <h1>Commissions</h1>
    <p class="admin-page-subtitle">Manage customer projects</p>
  </div>
  <%= link_to "New Commission", new_admin_commission_path, class: "btn btn--primary" %>
</header>

<div class="admin-filters">
  <%= link_to "All", admin_commissions_path, class: "filter-btn #{params[:status].blank? ? 'active' : ''}" %>
  <%= link_to "Inquiry", admin_commissions_path(status: "inquiry"), class: "filter-btn #{params[:status] == 'inquiry' ? 'active' : ''}" %>
  <%= link_to "In Progress", admin_commissions_path(status: "in_progress"), class: "filter-btn #{params[:status] == 'in_progress' ? 'active' : ''}" %>
  <%= link_to "Completed", admin_commissions_path(status: "completed"), class: "filter-btn #{params[:status] == 'completed' ? 'active' : ''}" %>
</div>

<% if @commissions.any? %>
  <div class="admin-table-container">
    <table class="admin-table">
      <thead>
        <tr>
          <th>Title</th>
          <th>Customer</th>
          <th>Status</th>
          <th>Est. Completion</th>
          <th>Price</th>
          <th>Actions</th>
        </tr>
      </thead>
      <tbody>
        <% @commissions.each do |commission| %>
          <tr>
            <td><strong><%= link_to commission.title, admin_commission_path(commission) %></strong></td>
            <td>
              <%= commission.customer_name %><br>
              <small><%= commission.customer_email %></small>
            </td>
            <td>
              <span class="status-badge <%= commission.status_color_class %>">
                <%= commission.status_label %>
              </span>
            </td>
            <td>
              <% if commission.estimated_completion_date %>
                <%= commission.estimated_completion_date.strftime("%b %d, %Y") %>
                <% if commission.overdue? %>
                  <span class="overdue-badge">Overdue</span>
                <% end %>
              <% else %>
                â€”
              <% end %>
            </td>
            <td><%= commission.price_display ? number_to_currency(commission.price_display) : "â€”" %></td>
            <td class="table-actions">
              <%= link_to "View", admin_commission_path(commission), class: "action-link" %>
              <%= link_to "Edit", edit_admin_commission_path(commission), class: "action-link" %>
            </td>
          </tr>
        <% end %>
      </tbody>
    </table>
  </div>
<% else %>
  <div class="empty-state">
    <span class="empty-state-icon">ðŸ“‹</span>
    <h3>No commissions yet</h3>
    <p>Commissions will appear here when customers inquire about custom work.</p>
    <%= link_to "Create Commission", new_admin_commission_path, class: "btn btn--primary" %>
  </div>
<% end %>
