<!DOCTYPE html>
<html lang="en">
  <head>
    <%= display_meta_tags site: "CMB Glass & Stone",
                          separator: "â€”",
                          reverse: true,
                          description: "Handcrafted stained glass art and custom commissions in Nashville, TN. Transform your space with light and color.",
                          keywords: "stained glass, custom art, glass art, commissions, handcrafted, windows, panels, Nashville, Tennessee, Middle Tennessee, stained glass artist",
                          og: {
                            type: "website",
                            site_name: "CMB Glass & Stone",
                            image: image_url("og-default.jpg")
                          },
                          twitter: {
                            card: "summary_large_image"
                          } %>

    <meta name="viewport" content="width=device-width,initial-scale=1">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="application-name" content="CMB Glass & Stone">
    <meta name="mobile-web-app-capable" content="yes">
    <meta name="theme-color" content="#1a1a2e">

    <%# Geo meta tags for Nashville, TN %>
    <meta name="geo.region" content="US-TN">
    <meta name="geo.placename" content="Nashville">
    <meta name="geo.position" content="36.1627;-86.7816">
    <meta name="ICBM" content="36.1627, -86.7816">

    <%= csrf_meta_tags %>
    <%= csp_meta_tag %>

    <%= yield :head %>

    <%# Structured Data for Local Business %>
    <script type="application/ld+json">
      {
        "@context": "https://schema.org",
        "@type": "LocalBusiness",
        "name": "CMB Glass & Stone",
        "description": "Handcrafted stained glass art and custom commissions serving Middle Tennessee",
        "@id": "<%= root_url rescue 'https://stainedglass.com' %>",
        "url": "<%= root_url rescue 'https://stainedglass.com' %>",
        "image": "<%= image_url('og-default.jpg') rescue '' %>",
        "priceRange": "$$",
        "address": {
          "@type": "PostalAddress",
          "addressLocality": "Nashville",
          "addressRegion": "TN",
          "addressCountry": "US"
        },
        "geo": {
          "@type": "GeoCoordinates",
          "latitude": 36.1627,
          "longitude": -86.7816
        },
        "areaServed": {
          "@type": "State",
          "name": "Tennessee",
          "containsPlace": {
            "@type": "City",
            "name": "Nashville"
          }
        },
        "makesOffer": {
          "@type": "Offer",
          "itemOffered": {
            "@type": "Service",
            "name": "Custom Stained Glass Commissions",
            "serviceType": "Art Commission"
          }
        }
      }
    </script>

    <%# Preconnect to external origins %>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>

    <%# Typography: Distinctive fonts %>
    <link href="https://fonts.googleapis.com/css2?family=Cormorant+Garamond:ital,wght@0,400;0,500;0,600;0,700;1,400;1,500&family=Outfit:wght@300;400;500;600&display=swap" rel="stylesheet">

    <link rel="icon" href="/icon.svg" type="image/svg+xml">
    <link rel="apple-touch-icon" href="/icon.png">

    <%# Canonical URL %>
    <%= yield :canonical %>

    <%= stylesheet_link_tag "application", "data-turbo-track": "reload" %>
    <%= stylesheet_link_tag "public", "data-turbo-track": "reload" %>
    <%= javascript_importmap_tags %>
  </head>

  <body class="<%= controller_name %> <%= action_name %>">
    <%= render "shared/navigation" %>

    <main id="main-content">
      <%= render "shared/flash_messages" %>
      <%= yield %>
    </main>

    <%= render "shared/footer" %>
  </body>
</html>
